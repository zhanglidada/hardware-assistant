# 硬件助手 - 系统架构文档

> **注意**：此文档为简化版架构说明，完整详细的架构分析请查看根目录下的 [PROJECT_ARCHITECTURE_ANALYSIS.md](../PROJECT_ARCHITECTURE_ANALYSIS.md)

## 项目概述

**Hardware Assistant** 是一个专业的硬件参数查询与对比微信小程序，采用**后端工程思维的前端架构**，强调类型安全、数据一致性和模块化设计。

## 核心架构特点

### 1. 分层架构设计
- **表示层**：页面组件，负责UI渲染
- **应用层**：Composables，处理业务逻辑
- **领域层**：Stores和Types，管理核心业务模型
- **基础设施层**：数据访问和外部服务集成

### 2. 类型驱动开发
- 全栈TypeScript，严格类型检查
- 接口契约优先，确保数据一致性
- 零`any`类型承诺，提升代码质量

### 3. 高可用设计
- 双数据源架构（云数据库 + 本地缓存）
- 多层错误处理和降级策略
- 自动化备份和恢复机制

## 技术栈概览

### 前端框架
- **Uni-app 3.0.0** - 跨端开发框架（微信小程序）
- **Vue 3.4.21** - Composition API 响应式框架
- **TypeScript 4.9.5** - 严格类型系统
- **Vite 5.2.8** - 构建工具

### UI & 样式
- **wot-design-uni 1.14.0** - 微信原生风格组件库
- **SCSS** - CSS 预处理器
- **Flexbox** - 现代布局方案

### 状态管理
- **Pinia** - Vue 官方状态管理方案

### 数据层
- **微信云数据库** - 云原生数据存储
- **本地 Mock 数据** - 降级方案
- **Python ETL管道** - 数据采集和清洗

## 主要功能模块

### 1. 硬件列表模块 (`src/pages/index/index.vue`)
- 硬件浏览和搜索功能
- 支持CPU/显卡/手机分类展示
- 智能搜索、分页加载、对比功能

### 2. 性能排行模块 (`src/pages/ranking/index.vue`)
- 硬件性能排行榜
- 综合评分算法（考虑价格、核心数、频率等参数）
- 金银铜牌标识（前三名特殊标识）

### 3. 硬件对比模块 (`src/pages/compare/index.vue`)
- 专业级硬件参数对比
- 可视化差异展示（进度条对比）
- 智能参数解析（核心数、频率等）

### 4. 硬件详情模块 (`src/pages/detail/index.vue`)
- 展示硬件完整规格参数
- 品牌主题色设计
- 价格和发布日期信息

### 5. 调试诊断模块 (`src/pages/debug/index.vue`)
- 云数据库诊断工具
- 环境状态检查、集合验证、数据加载测试

### 6. 数据访问模块 (`src/composables/useCloudData.ts`)
- 统一数据访问接口
- Read-Through缓存策略（云数据库优先）
- 智能降级机制（云数据库失败时使用本地数据）

### 7. 状态管理模块 (`src/stores/compare.ts`)
- 管理硬件对比状态
- 跨页面状态同步
- 业务规则约束（同类型最多2个）

### 8. 数据管道模块 (`scripts/`目录)
- 自动化数据采集、清洗和更新
- 模块化爬虫设计，支持扩展
- 优雅降级机制，采集失败时使用备用数据

## 数据流分析

### 前端数据流
```
用户操作 → 页面组件 → Composables → 数据访问层 → 云数据库/本地数据
      ↓          ↓          ↓              ↓
    UI更新   状态更新   业务逻辑处理   数据获取和缓存
```

### 后端数据流
```
数据源 → Python爬虫 → 数据清洗 → 格式转换 → 云数据库导入
   ↓         ↓          ↓          ↓          ↓
电商网站  采集原始数据  验证和清洗  JSONL格式  批量导入
```

### 错误处理流
```
错误发生 → 页面层捕获 → Composables处理 → 数据层降级 → 本地数据兜底
   ↓          ↓              ↓              ↓          ↓
用户提示  错误信息记录  尝试恢复或降级  切换数据源  最终保障
```

## 性能优化策略

### 1. 加载优化
- 分页加载（每页20条，上拉触底加载更多）
- 骨架屏首屏优化
- 计算属性缓存，减少重复计算

### 2. 响应式优化
- Composition API细粒度响应
- Pinia状态持久化，减少重复请求
- 响应式设计，优化移动端体验

### 3. 数据缓存
- Read-Through缓存策略
- 本地JSON缓存作为降级方案
- 智能数据预加载

## 开发规范

### TypeScript规范
- 严格模式启用，避免使用`any`类型
- 接口优先于类型别名
- 导出类型定义，确保类型安全

### 命名规范
- 组件文件：`PascalCase.vue`
- Composable：`useXxx`前缀
- Store：`xxxStore`后缀
- 类型定义：`XxxSpecs`/`XxxInterface`

### 代码组织
- 单一职责原则
- 关注点分离
- DRY原则（Don't Repeat Yourself）
- 模块化设计

## 项目状态

### 当前状态
- ✅ 核心功能完整实现
- ✅ 数据管道正常运行
- ✅ 类型安全体系建立
- ✅ 性能优化基本完成
- ✅ 文档体系初步建立

### 短期规划
- [ ] 增加更多硬件品类（主板、内存、SSD）
- [ ] 优化爬虫系统，支持更多数据源
- [ ] 实现用户收藏和历史记录功能
- [ ] 添加价格趋势分析图表

### 长期愿景
- [ ] 构建硬件兼容性检查工具
- [ ] 实现AI驱动的硬件推荐引擎
- [ ] 建立开源硬件数据库标准
- [ ] 扩展多平台支持（H5、App）

## 项目亮点总结

1. **完整的类型安全体系**：从数据契约到UI组件，全程TypeScript保障
2. **健壮的数据访问层**：智能降级策略保证应用高可用
3. **模块化的架构设计**：清晰的层次分离和职责划分
4. **工程化的开发流程**：自动化工具链和标准化规范
5. **专业的数据管道**：从采集到展示的完整数据处理流程

---

**完整架构分析**：请查看 [PROJECT_ARCHITECTURE_ANALYSIS.md](../PROJECT_ARCHITECTURE_ANALYSIS.md) 获取详细的项目架构分析报告  
**技术能力清单**：请查看 [SKILLS.md](./SKILLS.md) 了解项目展示的核心技术能力  
**爬虫系统重构**：请查看 [SCRAPER_SYSTEM_REFACTOR.md](./SCRAPER_SYSTEM_REFACTOR.md) 了解数据采集系统的重构过程
